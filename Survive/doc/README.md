##小型手游服务器



服务器采用C+lua的方式开发.除效率要求高和lua无法实现的部分由C实现外，所有逻辑功能由lua实现.

服务器组结构图:

![Alt text](./服务器结构图.jpg)


图中所有连接线均表示tcp长连接.


gateserver:前端连接服务器,可部署多台.负责将玩家的通讯消息转发到内部服务器组/将内部服务器组的消息发往玩家.
完全由C语言编写.每个进程可启动最多8个agentservice线程用于处理用户连接.

groupserver:中心服务器,只有一台.主要负责管理整个服务器组以及处理游戏的全局逻辑.除启动框架外其余逻辑全部由
lua编写

gameserver:战斗及地图服务.负责玩家在游戏场景中的移动，战斗等逻辑.单线程,每个服务上可以加载1-n个场景.除启动
框架以外其余逻辑全部由lua编写。

数据库:数据库采用redis/ssdb。分为两个主要的功能数据库(帐号数据库,角色数据库),其中帐号数据库唯一,保存的数据是
帐号,角色id对,角色数据库可部署多个,通过角色id做hash将角色数据分布到不同的角色数据库中.




